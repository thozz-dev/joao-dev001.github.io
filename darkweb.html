<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Access Portal - El Cartel</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0d1a0d 100%);
            color: #e0e0e0;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(34, 139, 34, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(220, 20, 60, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 60px 0 40px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            margin-bottom: 40px;
            border: 1px solid rgba(34, 139, 34, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header .btn {
            display: inline-block;
            align-items: center;
            padding: 10px 20px;
            background: linear-gradient(135deg, #228B22, #32CD32);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 900;
            font-size: 1.0rem;
            text-align: center;
            margin-top: 20px;
            max-width: 250px;
            max-height: 50px;;
            transition: background 0.3s ease;
        }

        .header .btn:hover {
            background: linear-gradient(135deg, #228B22, #ffffff, #dc143c);
        }

        .logo {
            width: 100px;
            height: 100px;
            margin: 0 auto 30px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid #dc143c;
            box-shadow: 0 0 30px rgba(220, 20, 60, 0.3);
            transition: all 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px rgba(220, 20, 60, 0.5);
        }

        .logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .title {
            font-size: 2.8rem;
            font-weight: 300;
            background: linear-gradient(135deg, #228B22, #ffffff, #dc143c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .subtitle {
            color: #888;
            font-size: 1.1rem;
            font-weight: 300;
            margin-bottom: 30px;
            letter-spacing: 1px;
        }

        .flag-divider {
            width: 200px;
            height: 4px;
            background: linear-gradient(to right, #228B22 33%, white 33%, white 66%, #dc143c 66%);
            margin: 0 auto;
            border-radius: 2px;
        }

        .page {
            display: none;
            animation: fadeInUp 0.6s ease-out;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .auth-container {
            max-width: 500px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            padding: 50px;
            border-radius: 20px;
            border: 1px solid rgba(34, 139, 34, 0.3);
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .auth-title {
            text-align: center;
            color: #ffffff;
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(34, 139, 34, 0.3);
        }

        .form-group {
            margin-bottom: 30px;
            position: relative;
        }

        .form-group label {
            display: block;
            color: #b0b0b0;
            margin-bottom: 10px;
            font-weight: 500;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(34, 139, 34, 0.4);
            border-radius: 10px;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
            outline: none;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: #228B22;
            box-shadow: 0 0 20px rgba(34, 139, 34, 0.2);
            background: rgba(0, 0, 0, 0.8);
        }

        .form-group input::placeholder {
            color: #666;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #228B22, #32CD32);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 20px;
        }

        .btn:hover {
            background: linear-gradient(135deg, #32CD32, #228B22);
            box-shadow: 0 5px 20px rgba(34, 139, 34, 0.4);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc143c, #ff4757);
        }

        .btn-danger:hover {
            background: linear-gradient(135deg, #ff4757, #dc143c);
            box-shadow: 0 5px 20px rgba(220, 20, 60, 0.4);
        }

        .shop-container {
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(34, 139, 34, 0.3);
            backdrop-filter: blur(15px);
        }

        .shop-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .shop-title {
            font-size: 2.5rem;
            font-weight: 300;
            color: #ffffff;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .product-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(34, 139, 34, 0.3);
            border-radius: 15px;
            padding: 30px;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(34, 139, 34, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .product-card:hover::before {
            left: 100%;
        }

        .product-card:hover {
            border-color: #228B22;
            box-shadow: 0 10px 40px rgba(34, 139, 34, 0.2);
            transform: translateY(-5px);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .product-title {
            color: #ffffff;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .product-category {
            color: #888;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .product-price {
            color: #dc143c;
            font-size: 1.8rem;
            font-weight: 700;
            white-space: nowrap;
        }

        .product-description {
            color: #b0b0b0;
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px; /* Added for spacing */
        }

        .product-actions .btn {
            flex: 1;
            margin: 0;
            padding: 12px;
            font-size: 0.9rem;
        }

        .cart-widget {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(220, 20, 60, 0.5);
            border-radius: 15px;
            padding: 20px;
            z-index: 1000;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .cart-header {
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cart-header:hover {
            transform: scale(1.05);
        }

        .cart-icon {
            color: #dc143c;
            font-size: 1.4rem;
            margin-right: 10px;
        }

        .cart-count {
            background: linear-gradient(135deg, #dc143c, #ff4757);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .cart-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 350px;
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid rgba(220, 20, 60, 0.5);
            border-radius: 15px;
            padding: 25px;
            margin-top: 15px;
            display: none;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
        }

        .cart-dropdown.open {
            display: block;
            animation: slideDown 0.4s ease;
        }

        @keyframes slideDown {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .cart-item {
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-name {
            color: #ffffff;
            font-weight: 500;
        }

        .cart-item-price {
            color: #dc143c;
            font-weight: bold;
        }

        .cart-item-remove {
            background: none;
            border: none;
            color: #dc143c;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .cart-item-remove:hover {
            background: rgba(220, 20, 60, 0.2);
        }

        .notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 1px solid #228B22;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            z-index: 2000;
            display: none;
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            max-width: 500px;
        }

        .notification.show {
            display: block;
            animation: modalAppear 0.5s ease;
        }

        @keyframes modalAppear {
            from { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.8); 
            }
            to { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1); 
            }
        }

        .notification h3 {
            color: #228B22;
            font-size: 1.5rem;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .notification p {
            color: #b0b0b0;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .error-message {
            background: rgba(220, 20, 60, 0.1);
            border: 1px solid rgba(220, 20, 60, 0.3);
            color: #ff6b7a;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }

        .error-message.show {
            display: block;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .loading {
            display: none;
            text-align: center;
            color: #228B22;
            margin-top: 20px;
        }

        .loading.show {
            display: block;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #228B22;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .modal {
            display: flex;
            position: fixed;
            z-index: 2001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(0, 0, 0, 0.9);
            margin: auto;
            padding: 30px;
            border: 1px solid rgba(34, 139, 34, 0.5);
            border-radius: 20px;
            width: 80%;
            max-width: 700px;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.7);
            transform: scale(0.9);
            transition: transform 0.3s ease;
            position: relative;
        }

        .modal.show .modal-content {
            transform: scale(1);
        }

        .modal-image {
            width: 100%;
            height: auto;
            max-height: 300px; 
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(220, 20, 60, 0.3);
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 15px;
            right: 25px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .close-button:hover,
        .close-button:focus {
            color: #dc143c;
            text-decoration: none;
            transform: scale(1.1);
        }

        .modal-title {
            color: #ffffff;
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .modal-category {
            color: #888;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
        }

        .modal-price {
            color: #dc143c;
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .modal-description {
            color: #b0b0b0;
            line-height: 1.7;
            margin-bottom: 30px;
            font-size: 1rem;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-actions .btn {
            width: auto;
            padding: 12px 25px;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .auth-container {
                padding: 30px 25px;
            }
            
            .shop-grid {
                grid-template-columns: 1fr;
            }
            
            .cart-widget {
                top: 20px;
                right: 20px;
                padding: 15px;
            }
            
            .cart-dropdown {
                width: 280px;
            }

            .modal-content {
                width: 95%;
                padding: 20px;
            }

            .modal-title {
                font-size: 1.5rem;
            }

            .modal-price {
                font-size: 1.8rem;
            }

            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="background-overlay"></div>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930" alt="El Cartel Logo">
            </div>
            <h1 class="title">EL CARTEL</h1>
            <p class="subtitle">SECURE ACCESS PORTAL</p>
            <a href="index.html" class="btn" id="homeRedirect">üíß EveryWater</a>
        </div>
        <div class="page active" id="authPage">
            <div class="auth-container">
                <h2 class="auth-title">AUTHENTIFICATION REQUISE</h2>
                <form id="authForm">
                    <div class="form-group">
                        <label for="name">ID</label>
                        <input type="text" id="name" name="name" placeholder="Entrez votre identifiant" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Code d'acc√®s / Message</label>
                        <input type="text" id="message" name="message" placeholder="Entrez votre code d'acc√®s" required>
                    </div>
                    <button type="submit" class="btn">AUTHENTIFIER</button>
                    <div class="loading" id="loading">V√©rification en cours...</div>
                    <div class="error-message" id="errorMessage">Acc√®s refus√©. V√©rifiez vos identifiants.</div>
                </form>
            </div>
        </div>
        <div class="page" id="shopPage">
            <div class="cart-widget">
                <div class="cart-header" onclick="toggleCart()">
                    <span class="cart-icon">üõí</span>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
                <div class="cart-dropdown" id="cartDropdown">
                    <h3 style="color: #dc143c; margin-bottom: 20px; font-size: 1.2rem;">PANIER üõí</h3>
                    <div id="cartItems"></div>
                    <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <button class="btn btn-danger" onclick="checkout()">ACHETER ü™ô</button>
                    </div>
                </div>
            </div>
            <div class="shop-container">
                <div class="shop-header">
                    <h2 class="shop-title">MARCH√â PRIV√â</h2>
                    <div class="flag-divider"></div>
                </div>
                <div class="shop-grid" id="productGrid">
                </div>
            </div>
        </div>
    </div>
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <img id="modalImage" src="" alt="Product Image" class="modal-image">
            <h3 id="modalTitle" class="modal-title"></h3>
            <p id="modalCategory" class="modal-category"></p>
            <p id="modalPrice" class="modal-price"></p>
            <p id="modalDescription" class="modal-description"></p>
            <div class="modal-actions">
                <button class="btn" id="modalAddToCartBtn">PANIER üõí</button>
                <button class="btn btn-danger" id="modalBuyDirectBtn">ACHETER ü™ô</button>
            </div>
        </div>
    </div>
    <div class="notification" id="notification">
        <h3>COMMANDE ENREGISTR√âE</h3>
        <p>Votre demande a √©t√© transmise avec succ√®s.</p>
        <p>Un membre de notre √©quipe vous contactera dans les plus brefs d√©lais via des canaux s√©curis√©s.</p>
        <p style="font-size: 0.9rem; color: #666;">R√©f√©rence: <span id="orderRef"></span></p>
        <button class="btn" onclick="closeNotification()">FERMER</button>
    </div>
    <script>
        const discordWebhookUrl = 'https://discord.com/api/webhooks/1387081823812714617/zCpx7INq_KT0B4sj83VVYk6uWSHaDoVIXnZ3mqAy9-V4t682yLWjOqZz5dxhMv0lts6I';
        const darkwebAccess = [
            {
                credentials: {
                    name: "US1D7045GC041C",
                    email: "client@everywater.fr",
                    subject: "other"
                },
                requiredKeywords: ["1750"],
                redirectPage: "darkweb.html",
                webhookMessage: "‚ö° Acc√®s d√©tect√© pour un membre des DGC"
            },
            {
                credentials: {
                    name: "Admin",
                    email: "admin@system.fr",
                    subject: "other"
                },
                requiredKeywords: ["code"],
                redirectPage: "darkweb.html",
                webhookMessage: "‚ö†Ô∏è Acc√®s admin d√©tect√©"
            }
        ];

        const products = [
            {
                id: 'prod001',
                name: 'Chargeur de 15 Balles de pistolet',
                category: 'Minutions',
                price: 20000,
                description: 'Chargeur de pistolet √† usage unique. Garanti de s√©curit√© maximale et r√©sistance √† toutes les conditions.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod002',
                name: 'Chargeur de 36 Balles de smg',
                category: 'Minutions',
                price: 60000,
                description: 'Chargeur de SMG √† usage unique. Optimis√© pour une efficacit√© sans pareille dans les situations critiques.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod003',
                name: 'Chargeur de 12 Balles de pompe',
                category: 'Minutions',
                price: 100000,
                description: 'Chargeur de pompe √† usage unique. Con√ßu pour des op√©rations sp√©ciales n√©cessitant une pr√©cision accrue.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod004',
                name: 'Chargeur de 60 balles de fusil d\'assaut',
                category: 'Minutions',
                price: 100000,
                description: 'Chargeur de fusil d\'assaut √† usage unique. Optimis√© pour des op√©rations critiques et des situations critiques.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod005',
                name: 'Chargeur am√©lior√© armes l√©g√®res',
                category: 'Munitions',
                price: 200000,
                description: 'Chargeur permettant de stocker plus de munitions sur une arme de poing.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod006',
                name: 'Chargeur am√©lior√© armes lourdes',
                category: 'Munitions',
                price: 700000,
                description: 'Chargeur permettant de stocker plus de munitions sur une arme lourde.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod007',
                name: 'Silencieux sur arme de poing ',
                category: 'Accessoires',
                price: 160000,
                description: 'Silencieux sur arme de poing tel que des pistolets',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
            {
                id: 'prod008',
                name: 'Silencieux armes lourdes',
                category: 'Accessoires',
                price: 300000,
                description: 'Silencieux sur arme lourdes tel que des fusil d\'assaut ou des fusil de sniper.',
                image: 'https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930' // Example image
            },
        ];

        let cart = [];
        let currentUser = null;
        let currentProductInModal = null;
        document.getElementById('authForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = {
                name: document.getElementById('name').value.trim(),
                message: document.getElementById('message').value.trim()
            };
            document.getElementById('loading').classList.add('show');
            document.getElementById('errorMessage').classList.remove('show');
            setTimeout(() => {
                const accessGranted = validateAccess(formData);
                document.getElementById('loading').classList.remove('show');
                if (accessGranted) {
                    currentUser = accessGranted;
                    grantAccess(accessGranted);
                } else {
                    document.getElementById('errorMessage').classList.add('show');
                }
            }, 1500);
        });
        function redirectToHome(closeCurrentPage) {
            if (closeCurrentPage) {
                window.open('index.html', '_blank');
                try {
                    window.open('', '_self').close();
                } catch (e) {
                    window.location.href = 'index.html';
                }
            } else {
                window.location.href = 'index.html';
            }
        }
        function validateAccess(formData) {
            for (const access of darkwebAccess) {
                if (access.credentials.name === formData.name) {
                    const hasRequiredKeyword = access.requiredKeywords.some(keyword => 
                        formData.message.toLowerCase().includes(keyword.toLowerCase())
                    );
                    if (hasRequiredKeyword) {
                        return access;
                    }
                }
            }
            return null;
        }
        function grantAccess(accessConfig) {
            console.log(`Webhook envoy√©: ${accessConfig.webhookMessage}`);
            console.log(`Utilisateur: ${accessConfig.credentials.name}`);
            console.log(`Redirection vers: ${accessConfig.redirectPage}`);
            sendDiscordWebhook(`**Acc√®s au portail**\nUtilisateur: \`${accessConfig.credentials.name}\`\nMessage: \`${document.getElementById('message').value.trim()}\`\nStatut: Acc√®s accord√© (${accessConfig.webhookMessage})`, 0x228B22);
            document.getElementById('authPage').classList.remove('active');
            setTimeout(() => {
                document.getElementById('shopPage').classList.add('active');
                renderProducts();
            }, 300);
        }
        function renderProducts() {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.classList.add('product-card');
                productCard.setAttribute('data-product-id', product.id);
                productCard.onclick = () => openProductModal(product.id);
                productCard.innerHTML = `
                    <div class="product-header">
                        <div>
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-category">${product.category}</p>
                        </div>
                        <div class="product-price">$${product.price.toLocaleString()}</div>
                    </div>
                    <p class="product-description">${product.description}</p>
                    <div class="product-actions">
                        <button class="btn" onclick="event.stopPropagation(); addToCart('${product.id}')">PANIER üõí</button>
                        <button class="btn btn-danger" onclick="event.stopPropagation(); buyDirect('${product.id}')">ACHETER ü™ô</button>
                    </div>
                `;
                productGrid.appendChild(productCard);
            });
        }
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                cart.push({ ...product, cartId: Date.now() });
                updateCartDisplay();
                animateCartIcon();
            }
        }
        function updateCartDisplay() {
            const cartCount = document.getElementById('cartCount');
            const cartItemsContainer = document.getElementById('cartItems');
            cartCount.textContent = cart.length;
            cartItemsContainer.innerHTML = '';

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p style="color: #666;">Votre panier est vide.</p>';
            } else {
                cart.forEach(item => {
                    const itemHTML = `
                        <div class="cart-item">
                            <span class="cart-item-name">${item.name}</span>
                            <span class="cart-item-price">$${item.price.toLocaleString()}</span>
                            <button class="cart-item-remove" onclick="removeFromCart(${item.cartId})">üóëÔ∏è</button>
                        </div>
                    `;
                    cartItemsContainer.innerHTML += itemHTML;
                });
            }
        }
        function removeFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            updateCartDisplay();
        }
        function toggleCart() {
            const cartDropdown = document.getElementById('cartDropdown');
            cartDropdown.classList.toggle('open');
        }
        function animateCartIcon() {
            const cartIcon = document.querySelector('.cart-icon');
            cartIcon.classList.add('animated');
            setTimeout(() => {
                cartIcon.classList.remove('animated');
            }, 500);
        }
        function checkout() {
            if (cart.length === 0) {
                alert('Votre panier est vide !');
                return;
            }
            const orderDetails = cart.map(item => `${item.name} ($${item.price.toLocaleString()})`).join('\n');
            const totalAmount = cart.reduce((sum, item) => sum + item.price, 0);
            const orderRef = 'ORD-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            sendDiscordWebhook(
                `**Nouvelle Commande**\nR√©f√©rence: \`${orderRef}\`\nUtilisateur: \`${currentUser ? currentUser.credentials.name : 'Inconnu'}\`\n\n**Articles Command√©s:**\n${orderDetails}\n\n**Montant Total:** \`$${totalAmount.toLocaleString()}\``,
                0xDC143C
            );
            showNotification(orderRef);
            cart = [];
            updateCartDisplay();
        }
        function buyDirect(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const orderRef = 'ORD-' + Math.random().toString(36).substr(2, 9).toUpperCase();
                sendDiscordWebhook(
                    `**Achat Direct**\nR√©f√©rence: \`${orderRef}\`\nUtilisateur: \`${currentUser ? currentUser.credentials.name : 'Inconnu'}\`\n\n**Article Achet√©:**\n${product.name} ($${product.price.toLocaleString()})\n\n**Montant Total:** \`$${product.price.toLocaleString()}\``,
                    0xDC143C
                );
                showNotification(orderRef);
                closeModal();
            }
        }
        function showNotification(orderRef) {
            const notification = document.getElementById('notification');
            document.getElementById('orderRef').textContent = orderRef;
            notification.classList.add('show');
        }
        function closeNotification() {
            const notification = document.getElementById('notification');
            notification.classList.remove('show');
        }
        async function sendDiscordWebhook(message, color) {
            const payload = {
                embeds: [{
                    title: "El Cartel",
                    description: message,
                    color: color,
                    timestamp: new Date().toISOString(),
                    fields: [
                        {
                            name: "Statut",
                            value: "V√©rification en cours...",
                            inline: true
                        },
                        {
                            name: "Date et Heure",
                            value: new Date().toLocaleString(),
                            inline: true
                        }
                    ],
                    footer: {
                        text: "Secure Access Portal",
                        icon_url: "https://media.discordapp.net/attachments/1232583375181582366/1387087700313505852/3fcf2fe3-dd13-4798-9041-e8af8b338b51.png?ex=685c1196&is=685ac016&hm=0b98e6a808a15974a5bf2b1dd9d6467734bb0c31341970e093e34bee56b17fbb&=&format=webp&quality=lossless&width=930&height=930"
                    }
                }]
            };

            try {
                const response = await fetch(discordWebhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload),
                });

                if (!response.ok) {
                    console.error('Erreur lors de l\'envoi du webhook Discord:', response.status, response.statusText);
                } else {
                    console.log('Webhook Discord envoy√© avec succ√®s.');
                }
            } catch (error) {
                console.error('Erreur r√©seau lors de l\'envoi du webhook Discord:', error);
            }
        }
        function openProductModal(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentProductInModal = product;

            document.getElementById('modalImage').src = product.image;
            document.getElementById('modalTitle').textContent = product.name;
            document.getElementById('modalCategory').textContent = product.category;
            document.getElementById('modalPrice').textContent = `$${product.price.toLocaleString()}`;
            document.getElementById('modalDescription').textContent = product.description;

            document.getElementById('modalAddToCartBtn').onclick = () => {
                addToCart(currentProductInModal.id);
                closeModal();
            };
            document.getElementById('modalBuyDirectBtn').onclick = () => {
                buyDirect(currentProductInModal.id);
            };

            document.getElementById('productModal').classList.add('show');
        }
        function closeModal() {
            const modal = document.getElementById('productModal');
            modal.classList.remove('show');
            currentProductInModal = null;
        }
        window.onclick = function(event) {
            const modal = document.getElementById('productModal');
            if (event.target == modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>